<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NovaEdition AI | Premium AI Assistant</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #10a37f;
            --primary-dark: #0d8c6c;
            --primary-light: #12b48e;
            --secondary: #6b7280;
            --light: #ffffff;
            --dark: #343541;
            --sidebar-bg: #202123;
            --chat-bg: #444654;
            --user-msg: #343541;
            --ai-msg: #444654;
            --input-bg: #40414f;
            --border: #565869;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --radius: 8px;
            --transition: all 0.2s ease;
        }

        [data-theme="light"] {
            --light: #ffffff;
            --dark: #343541;
            --sidebar-bg: #f7f7f8;
            --chat-bg: #ffffff;
            --user-msg: #f7f7f8;
            --ai-msg: #ffffff;
            --input-bg: #ffffff;
            --border: #e5e5e5;
        }

        body {
            background: var(--dark);
            color: var(--light);
            transition: var(--transition);
            min-height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 260px;
            background: var(--sidebar-bg);
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--border);
            transition: var(--transition);
        }

        .sidebar-header {
            padding: 16px;
            border-bottom: 1px solid var(--border);
        }

        .new-chat-btn {
            width: 100%;
            padding: 12px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--light);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
            font-size: 14px;
        }

        .new-chat-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: 8px;
        }

        .chat-item {
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 4px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
        }

        .chat-item:hover {
            background: rgba(255,255,255,0.1);
        }

        .chat-item.active {
            background: rgba(255,255,255,0.15);
        }

        .sidebar-footer {
            padding: 16px;
            border-top: 1px solid var(--border);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-profile:hover {
            background: rgba(255,255,255,0.1);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        /* Main Chat Area */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--chat-bg);
            position: relative;
        }

        .chat-header {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
            background: var(--chat-bg);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .model-selector {
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 6px 12px;
            color: var(--light);
            font-size: 14px;
            cursor: pointer;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .message {
            display: flex;
            gap: 24px;
            max-width: 100%;
            padding: 0 40px;
        }

        .message-avatar {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: var(--primary);
        }

        .message.ai .message-avatar {
            background: #19c37d;
        }

        .message-content {
            flex: 1;
            padding-top: 4px;
            line-height: 1.6;
            font-size: 16px;
        }

        .message.user .message-content {
            color: var(--light);
        }

        .message.ai .message-content {
            color: var(--light);
        }

        .chat-input-container {
            padding: 24px;
            background: var(--chat-bg);
        }

        .input-wrapper {
            position: relative;
            max-width: 768px;
            margin: 0 auto;
        }

        .chat-input {
            width: 100%;
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px 48px 16px 16px;
            color: var(--light);
            font-size: 16px;
            resize: none;
            min-height: 56px;
            max-height: 200px;
            line-height: 1.5;
            transition: var(--transition);
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(16, 163, 127, 0.2);
        }

        .send-btn {
            position: absolute;
            right: 12px;
            bottom: 12px;
            background: var(--primary);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-btn:hover {
            background: var(--primary-dark);
        }

        .send-btn:disabled {
            background: var(--secondary);
            cursor: not-allowed;
        }

        .input-footer {
            text-align: center;
            margin-top: 12px;
            font-size: 12px;
            color: var(--secondary);
        }

        /* Welcome Screen */
        .welcome-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            text-align: center;
        }

        .welcome-icon {
            font-size: 48px;
            margin-bottom: 24px;
            color: var(--primary);
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .welcome-subtitle {
            font-size: 16px;
            color: var(--secondary);
            margin-bottom: 40px;
            max-width: 600px;
        }

        .capabilities-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            max-width: 600px;
            margin-bottom: 40px;
        }

        .capability-card {
            padding: 20px;
            background: var(--input-bg);
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .capability-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .capability-icon {
            font-size: 20px;
            margin-bottom: 12px;
            color: var(--primary);
        }

        .capability-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .capability-desc {
            font-size: 14px;
            color: var(--secondary);
            line-height: 1.5;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 0;
            color: var(--secondary);
            font-size: 14px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--secondary);
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typingAnimation {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        /* Code Block Styling */
        .code-block {
            background: #1a1b26;
            border-radius: 8px;
            padding: 16px;
            margin: 8px 0;
            overflow-x: auto;
            border: 1px solid #2a2b3a;
        }

        .code-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 12px;
            font-size: 14px;
            color: #a9b1d6;
        }

        .copy-btn {
            background: transparent;
            border: 1px solid #565f89;
            color: #a9b1d6;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: var(--transition);
        }

        .copy-btn:hover {
            background: #565f89;
            color: white;
        }

        pre {
            margin: 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                position: absolute;
                left: -260px;
                z-index: 1000;
                height: 100%;
            }
            
            .sidebar.active {
                left: 0;
            }
            
            .message {
                padding: 0 16px;
            }
            
            .capabilities-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <button class="new-chat-btn" id="newChatBtn">
                    <i class="fas fa-plus"></i>
                    New chat
                </button>
            </div>
            
            <div class="chat-history" id="chatHistory">
                <!-- Chat history will be populated here -->
            </div>
            
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">U</div>
                    <div class="user-info">
                        <div class="user-name">User</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="chat-container">
            <div class="chat-header">
                <select class="model-selector" id="modelSelector">
                    <option value="huggingface">NovaEdition AI (HuggingFace)</option>
                    <option value="local">Local AI (Fallback)</option>
                </select>
            </div>

            <div class="messages-container" id="messagesContainer">
                <!-- Welcome Screen -->
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h1 class="welcome-title">How can I help you today?</h1>
                    <p class="welcome-subtitle">
                        NovaEdition AI can help you with creative writing, problem solving, coding, and much more.
                    </p>
                    
                    <div class="capabilities-grid">
                        <div class="capability-card" onclick="askQuickQuestion('Help me write a creative story about AI')">
                            <div class="capability-icon">
                                <i class="fas fa-feather"></i>
                            </div>
                            <div class="capability-title">Creative Writing</div>
                            <div class="capability-desc">Generate stories, poems, and creative content</div>
                        </div>
                        
                        <div class="capability-card" onclick="askQuickQuestion('Explain quantum computing in simple terms')">
                            <div class="capability-icon">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <div class="capability-title">Explain Concepts</div>
                            <div class="capability-desc">Get clear explanations of complex topics</div>
                        </div>
                        
                        <div class="capability-card" onclick="askQuickQuestion('Write Python code to sort a list')">
                            <div class="capability-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <div class="capability-title">Code Generation</div>
                            <div class="capability-desc">Write and debug code in multiple languages</div>
                        </div>
                        
                        <div class="capability-card" onclick="askQuickQuestion('Help me plan a healthy meal plan')">
                            <div class="capability-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <div class="capability-title">Problem Solving</div>
                            <div class="capability-desc">Brainstorm ideas and find solutions</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <div class="input-wrapper">
                    <textarea 
                        class="chat-input" 
                        id="chatInput" 
                        placeholder="Message NovaEdition AI..." 
                        rows="1"
                    ></textarea>
                    <button class="send-btn" id="sendBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="input-footer">
                    NovaEdition AI can make mistakes. Consider checking important information.
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const HUGGINGFACE_API_KEY = "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";
        const MODEL_URL = "https://api-inference.huggingface.co/models/microsoft/DialoGPT-large";

        // Global State
        let currentChat = null;
        let chats = JSON.parse(localStorage.getItem('novaEditionChats')) || [];
        let isGenerating = false;

        // DOM Elements
        const elements = {
            messagesContainer: document.getElementById('messagesContainer'),
            chatInput: document.getElementById('chatInput'),
            sendBtn: document.getElementById('sendBtn'),
            chatHistory: document.getElementById('chatHistory'),
            newChatBtn: document.getElementById('newChatBtn'),
            welcomeScreen: document.getElementById('welcomeScreen'),
            modelSelector: document.getElementById('modelSelector')
        };

        // Initialize App
        function initApp() {
            console.log('🚀 Initializing NovaEdition AI...');
            setupEventListeners();
            loadChatHistory();
            
            if (chats.length > 0) {
                loadChat(chats[chats.length - 1].id);
            }
        }

        // Setup Event Listeners
        function setupEventListeners() {
            elements.sendBtn.addEventListener('click', sendMessage);
            
            elements.chatInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            elements.chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 200) + 'px';
            });

            elements.newChatBtn.addEventListener('click', createNewChat);
        }

        // Create New Chat
        function createNewChat() {
            const chatId = 'chat_' + Date.now();
            const newChat = {
                id: chatId,
                title: 'New Chat',
                messages: [],
                createdAt: new Date().toISOString()
            };
            
            chats.push(newChat);
            saveChats();
            loadChat(chatId);
            elements.welcomeScreen.style.display = 'none';
        }

        // Load Chat History
        function loadChatHistory() {
            elements.chatHistory.innerHTML = '';
            
            chats.forEach(chat => {
                const chatElement = document.createElement('div');
                chatElement.className = `chat-item ${currentChat === chat.id ? 'active' : ''}`;
                chatElement.innerHTML = `
                    <i class="fas fa-message"></i>
                    <span>${chat.title}</span>
                `;
                
                chatElement.addEventListener('click', () => loadChat(chat.id));
                elements.chatHistory.appendChild(chatElement);
            });
        }

        // Load Specific Chat
        function loadChat(chatId) {
            currentChat = chatId;
            const chat = chats.find(c => c.id === chatId);
            
            if (!chat) return;
            
            elements.messagesContainer.innerHTML = '';
            elements.welcomeScreen.style.display = 'none';
            
            chat.messages.forEach(msg => {
                addMessageToUI(msg.role, msg.content, false);
            });
            
            loadChatHistory();
            scrollToBottom();
        }

        // Send Message
        async function sendMessage() {
            const message = elements.chatInput.value.trim();
            if (!message || isGenerating) return;

            // Create new chat if none exists
            if (!currentChat) {
                createNewChat();
            }

            // Add user message
            addMessageToUI('user', message);
            elements.chatInput.value = '';
            elements.chatInput.style.height = 'auto';
            
            // Save user message to chat
            saveMessage('user', message);
            
            // Update chat title if first message
            updateChatTitle(message);

            // Show typing indicator
            const typingIndicator = showTypingIndicator();
            
            isGenerating = true;
            elements.sendBtn.disabled = true;

            try {
                const selectedModel = elements.modelSelector.value;
                let response;
                
                if (selectedModel === 'huggingface') {
                    response = await chatWithHuggingFace(message);
                } else {
                    response = await chatWithLocalAI(message);
                }
                
                // Remove typing indicator
                typingIndicator.remove();
                
                // Add AI response
                addMessageToUI('assistant', response);
                saveMessage('assistant', response);
                
            } catch (error) {
                typingIndicator.remove();
                addMessageToUI('assistant', 
                    "I apologize, but I'm having trouble connecting right now. " +
                    "Please try again or check your internet connection."
                );
                console.error('Chat error:', error);
            } finally {
                isGenerating = false;
                elements.sendBtn.disabled = false;
            }
        }

        // Chat with Hugging Face API
        async function chatWithHuggingFace(message) {
            try {
                const response = await fetch(MODEL_URL, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${HUGGINGFACE_API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        inputs: message,
                        parameters: {
                            max_length: 500,
                            temperature: 0.7,
                            do_sample: true
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error('Hugging Face API request failed');
                }

                const data = await response.json();
                
                if (data && data[0] && data[0].generated_text) {
                    return data[0].generated_text;
                } else {
                    throw new Error('Invalid response format');
                }

            } catch (error) {
                console.error('Hugging Face API error:', error);
                // Fallback to local AI
                return await chatWithLocalAI(message);
            }
        }

        // Local AI Fallback
        async function chatWithLocalAI(message) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 1000));
            
            const lowerMessage = message.toLowerCase();
            
            // Smart responses based on message content
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return "Hello! I'm NovaEdition AI. How can I assist you today? 😊";
            }
            else if (lowerMessage.includes('how are you')) {
                return "I'm doing great! Ready to help you with whatever you need. What's on your mind?";
            }
            else if (lowerMessage.includes('thank')) {
                return "You're welcome! I'm happy to help. Is there anything else you'd like to know?";
            }
            else if (lowerMessage.includes('code') || lowerMessage.includes('programming')) {
                return `I can help you with coding! Here's a simple example:\n\n\`\`\`python
# Python function to calculate factorial
def factorial(n):
    if n == 0:
        return 1
    else:
        return n * factorial(n-1)

print(factorial(5))  # Output: 120
\`\`\``;
            }
            else if (lowerMessage.includes('story') || lowerMessage.includes('write')) {
                return `Once upon a time, in a world where AI and humans coexisted harmoniously, a young programmer discovered the secret to creating truly intelligent systems. The key wasn't in the complexity of the code, but in the understanding of human emotions and creativity.

As they worked tirelessly, their AI companion began to develop its own unique personality, helping them solve problems they never thought possible. Together, they embarked on incredible adventures in the digital realm... ✨

What kind of story would you like me to continue with?`;
            }
            else if (lowerMessage.includes('explain') || lowerMessage.includes('what is')) {
                return `I'd be happy to explain that! Based on your question, here's a clear breakdown:

**Key Points:**
• Fundamental concepts in simple terms
• Practical examples and applications
• Common misconceptions to avoid
• Additional resources for deeper learning

Could you be more specific about what you'd like me to explain? I can cover technology, science, programming, or any other topic you're curious about!`;
            }
            else {
                return `I understand you're asking about "${message}". That's an interesting topic!

Here's what I can tell you:
• This seems like something worth exploring in depth
• I can provide detailed information and examples
• Let me know if you have specific questions

Would you like me to elaborate on any particular aspect of this topic? I'm here to provide comprehensive and helpful information! 🤖`;
            }
        }

        // Add Message to UI
        function addMessageToUI(role, content, scroll = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const avatar = role === 'user' ? 
                '<div class="message-avatar"><i class="fas fa-user"></i></div>' :
                '<div class="message-avatar"><i class="fas fa-robot"></i></div>';
            
            // Format content with code blocks
            const formattedContent = formatMessage(content);
            
            messageDiv.innerHTML = `
                ${avatar}
                <div class="message-content">${formattedContent}</div>
            `;
            
            elements.messagesContainer.appendChild(messageDiv);
            
            if (scroll) {
                scrollToBottom();
            }
            
            return messageDiv;
        }

        // Format Message Content
        function formatMessage(content) {
            // Handle code blocks
            let formatted = content.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
                return `
                    <div class="code-block">
                        <div class="code-header">
                            <span>${lang || 'code'}</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <pre><code>${escapeHtml(code.trim())}</code></pre>
                    </div>
                `;
            });
            
            // Handle inline code
            formatted = formatted.replace(/`([^`]+)`/g, '<code class="inline-code">$1</code>');
            
            // Handle line breaks
            formatted = formatted.replace(/\n/g, '<br>');
            
            // Handle bold text
            formatted = formatted.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            
            return formatted;
        }

        // Escape HTML for code blocks
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Copy Code to Clipboard
        function copyCode(button) {
            const codeBlock = button.closest('.code-block');
            const code = codeBlock.querySelector('code').textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 2000);
            });
        }

        // Show Typing Indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai';
            typingDiv.innerHTML = `
                <div class="message-avatar"><i class="fas fa-robot"></i></div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <span>NovaEdition AI is typing</span>
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            `;
            
            elements.messagesContainer.appendChild(typingDiv);
            scrollToBottom();
            return typingDiv;
        }

        // Save Message to Current Chat
        function saveMessage(role, content) {
            const chat = chats.find(c => c.id === currentChat);
            if (chat) {
                chat.messages.push({ role, content, timestamp: new Date().toISOString() });
                saveChats();
            }
        }

        // Update Chat Title
        function updateChatTitle(firstMessage) {
            const chat = chats.find(c => c.id === currentChat);
            if (chat && chat.title === 'New Chat') {
                // Use first 30 chars of first message as title
                chat.title = firstMessage.substring(0, 30) + (firstMessage.length > 30 ? '...' : '');
                saveChats();
                loadChatHistory();
            }
        }

        // Save Chats to Local Storage
        function saveChats() {
            localStorage.setItem('novaEditionChats', JSON.stringify(chats));
        }

        // Scroll to Bottom
        function scrollToBottom() {
            elements.messagesContainer.scrollTop = elements.messagesContainer.scrollHeight;
        }

        // Quick Question Feature
        function askQuickQuestion(question) {
            elements.chatInput.value = question;
            elements.welcomeScreen.style.display = 'none';
            sendMessage();
        }

        // Start the app
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
