<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Content Page</title>
    <style>
        /* Global Reset/Base */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f1f5f9;
        }

        /* --- STYLING FOR THE SLIDER (UPLOAD PANEL) --- */
        .settings-panel {
            padding: 20px;
            background: #fff;
            margin: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .slider-container {
            margin-top: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        /* Custom Styling for the Range Slider */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            background: #ddd;
            border-radius: 5px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }
        input[type=range]:hover {
            opacity: 1;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        input[type=range]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: none;
        }

        /* --- RESPONSIVE FILTER/CONTENT LAYOUT --- */
        .main-layout {
            display: flex; /* Use Flexbox for side-by-side */
            padding: 20px;
            gap: 20px;
        }

        .filter-sidebar {
            width: 250px;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            flex-shrink: 0; /* Prevents sidebar from shrinking too much */
        }

        .content-area {
            flex-grow: 1;
        }

        .filter-group {
            margin-bottom: 20px;
        }

        .filter-group select {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .content-item {
            background: white;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        /* --- MOBILE MEDIA QUERY FIX --- */
        @media (max-width: 768px) {
            .main-layout {
                flex-direction: column; /* Stack filters above content on mobile */
                padding: 10px;
            }
            .filter-sidebar {
                width: 100%; /* Sidebar takes full width */
                margin-bottom: 20px;
            }
            /* Fix for colliding text/elements in a group */
            .content-item h3 {
                word-wrap: break-word; /* Ensure long words break */
                min-width: 0; /* Allow flex children to shrink */
            }
        }
    </style>
</head>
<body>

    <div class="settings-panel">
        <h2>Upload/Settings Panel</h2>
        <p>This demonstrates the styled slider.</p>
        <div class="slider-container">
            <label for="qualitySlider">Image Quality: <span id="qualityValue">80</span>%</label>
            <input type="range" id="qualitySlider" min="10" max="100" value="80">
        </div>
    </div>

    <div class="main-layout">
        
        <div class="filter-sidebar">
            <h3>Content Filters</h3>
            
            <div class="filter-group">
                <label for="categoryFilter">Category</label>
                <select id="categoryFilter">
                    <option value="">All Categories</option>
                    <option value="promo">Promotion</option>
                    <option value="news">News</option>
                    <option value="tech">Tech</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="sortOrder">Sort By</label>
                <select id="sortOrder">
                    <option value="newest">Newest First</option>
                    <option value="oldest">Oldest First</option>
                    <option value="popular">Most Popular</option>
                </select>
            </div>

        </div>

        <div class="content-area" id="contentArea">
            <div class="content-item">
                <h3>Content Title 1</h3>
                <p>This is item content. The layout will now stack cleanly on mobile.</p>
            </div>
            <div class="content-item">
                <h3>Content Title 2: A very long title that would collide on mobile devices before the fix</h3>
                <p>More content here.</p>
            </div>
            <div class="content-item">
                <h3>Content Title 3</h3>
                <p>Last item content.</p>
            </div>
        </div>

    </div>

    <script>
        // --- JAVASCRIPT FOR FILTERS AND SLIDER ---

        // 1. Slider Value Display
        const slider = document.getElementById('qualitySlider');
        const sliderValue = document.getElementById('qualityValue');

        slider.oninput = function() {
            sliderValue.textContent = this.value;
        }


        // 2. Placeholder for Filtering Logic (Adapt this to your Firebase code)
        const categoryFilter = document.getElementById('categoryFilter');
        const sortOrder = document.getElementById('sortOrder');
        const contentArea = document.getElementById('contentArea');

        function applyFilters() {
            const selectedCategory = categoryFilter.value;
            const selectedSort = sortOrder.value;

            console.log(`Filtering by: ${selectedCategory}, Sorting by: ${selectedSort}`);

            // **YOUR FIREBASE/CONTENT LOADING LOGIC GOES HERE**
            // Example: 
            // db.collection('prompts')
            //   .where('category', '==', selectedCategory) // if selectedCategory is not empty
            //   .orderBy('createdAt', selectedSort === 'newest' ? 'desc' : 'asc')
            //   .get()
            //   .then(snapshot => {
            //      // ... update contentArea with new data ...
            //   });

            // For now, we'll just show an alert
            contentArea.innerHTML = '<p>Applying filters... (Check console for filter values)</p>';
            setTimeout(() => {
                // Re-add your actual content loading function call here
                contentArea.innerHTML = 'Content reloaded based on filters.';
            }, 500);
        }

        // Attach the filtering function to the change events
        categoryFilter.addEventListener('change', applyFilters);
        sortOrder.addEventListener('change', applyFilters);

        // Initial load
        document.addEventListener('DOMContentLoaded', applyFilters);
    </script>
</body>
</html>
